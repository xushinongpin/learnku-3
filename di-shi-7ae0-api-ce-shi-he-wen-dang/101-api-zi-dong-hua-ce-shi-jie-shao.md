## API 自动化测试

我们已经完成了 Larabbs 所有的接口开发，接下来我们需要将接口交付给其他的工程师对接。将接口部署到生产环境时，如何确保交付的接口正确稳定呢？后续我们还会为项目新增功能，到那时，我们如何保证代码升级过后，接口依然正常？

在开发过程中，我们使用 PostMan 手动一个个接口测试，可当我们有几十个甚至上百个接口时，要同时测试这些接口，手动测试将无法适用。解决方案是自动化测试，自动化测试是保证项目质量的重要环节，这一节我们来了解一下测试的相关概念。

## 单元测试

单元测试是指对软件中的最小可测试单元进行检查和验证，对于 PHP 来说通常情况下是对某个类中的**某个方法**，或者单独的某个方法进行测试。单元测试的目的是首先保证一个系统的**基本组成单元**能正常工作，所有基础零件工作正常了，组装出来的软件才不会出问题。

单元测试是**代码级别**的测试，开发和维护成本都很高，不建议小团队使用。如果是多人协作，我的任务是单独的封装一些通用功能，譬如写个 Service；或者编写一个扩展包，提供一些底层的代码接口，譬如为某个第三方应用封装 SDK，那么单元测试非常有必要。

单元测试涉及的知识点很多，本教程中，我们不对单元测试进行单独讲解。

## API 集成测试

Laravel 框架自带的集成 API 测试，见[文档](https://learnku.com/docs/laravel/5.5/http-tests#testing-json-apis)，我们初始化完整的应用程序上下文，准备好数据库中的测试数据后，就可以方便的模拟各种请求方式，调用接口获取响应结果，最终**断言**返回的结果是否等于预期结果。

API**集成测试**需要准备测试数据，需要设置用户，分配用户权限，为测试接口准备好相关联的数据。虽然有一定得维护成本，但是相比单元测试，维护成本要少很多，在一定程度上更能够保证项目的健壮性。

## PostMan 测试

使用 PostMan 等工具进行手动测试，这种是最推崇的测试方案，非常适合小团队使用，因为可以比较真实地模拟用户请求，并且团队协作中，后端工程师可以将 PostMan 的调试接口分享给客户端工程师，接口是否有问题客户端工程师可以自行测试。

